"use strict";var token="92ff77f2509ecd480df28111c9488f5c",url="zhangshier.vip",api="https://hexo-hot-article.zhangshier.vip/",c=(api=(void 0===api||null==api?(console.log("未填写api"),"https://test.zhangshier.vip/get_hot_post?access_token="):(console.log("已填写api"),"".concat(api,"get_hot_post?access_token="))).concat(token,"&url=").concat(url),document.querySelectorAll("#hot_post")[0]);function getTime(t){var e=(e=parseInt(t/60/60%24))<10?"0"+e:e,n=(n=parseInt(t/60%60))<10?"0"+n:n,t=parseInt(t%60);return[e,n,t=t<10?"0"+t:t]}function sort(){for(var s=document.getElementsByClassName("sort-table"),r=(console.log(s),1),t=0;t<s.length;t++)s[t].addEventListener("click",function(){for(var t,e,n=document.querySelectorAll("#hot-post tbody > tr"),n=Array.prototype.slice.call(document.querySelectorAll("#hot-post tbody > tr")),c=this.cellIndex,a=this.dataset.type,o=(n.sort(function(t,e){var n,o;return"number"===a&&(n=+t.children[c].textContent,o=+e.children[c].textContent),"string"===a&&(n=t.children[c].textContent.toLowerCase(),o=e.children[c].textContent.toLowerCase()),n<o?-1*r:o<n?+r:0}),document.querySelector("#hot-post tbody"));o.firstChild;)o.removeChild(o.firstChild);for(t=0;t<n.length;t++)o.appendChild(n[t]);for(e=0;e<s.length;e++)s[e].className="";this.className=1===r?"asc":"desc",r*=-1})}c.innerHTML="<p>连接中...</p>",fetch(api).then(function(t){return t.json()}).then(function(t){var e=t.post_general,n=t.post_info,t=document.createElement("table"),o=(t.id="hot-sum",document.createElement("table"));o.id="hot-post";var a=getTime(e.sum_average_stay_time*e.sum_visitor_count);t.innerHTML='\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>起始时间</th>\n\t\t\t\t\t<th>总访客数 UV</th>\n\t\t\t\t\t<th>总访问量 PV</th>\n\t\t\t\t\t<th>总阅读时长</th>\n\t\t\t\t\t<th>人均阅读时长</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t<td class="score">'.concat(e.timeSpan,'</td>\n\t\t\t\t\t<td class="score">').concat(e.sum_visitor_count,'</td>\n\t\t\t\t\t<td class="score">').concat(e.sum_pv_count,'</td>\n\t\t\t\t\t<td class="score">').concat(a[0],"时").concat(a[1],"分").concat(a[2],'秒</td>\n\t\t\t\t\t<td class="score">').concat(e.sum_average_stay_time,"</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t\t"),o.innerHTML='\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th class="sort-table" data-type="number">Num</th>\n\t\t\t\t\t\t<th class="sort-table" data-type="string">Title</th>\n\t\t\t\t\t\t<th class="sort-table" data-type="number">PV</th>\n\t\t\t\t\t\t<th class="sort-table" data-type="number">UV</th>\n\t\t\t\t\t\t<th class="sort-table" data-type="number">Average Time</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>',(tbody=document.createElement("tbody")).id="list";for(var s=0;s<n.length;s++){var r=document.createElement("tr");r.innerHTML+='\n\t\t\t\t\t\t<td class="score">'.concat(s+1,'</td>\n\t\t\t\t\t\t<td class="score"><a href=').concat(n[s].url,">").concat(n[s].title,'</a></td>\n\t\t\t\t\t\t<td class="score">').concat(n[s].pv_count,'</td>\n\t\t\t\t\t\t<td class="score">').concat(n[s].visitor_count,'</td>\n\t\t\t\t\t\t<td class="score">').concat(n[s].average_stay_time,"</td>\n\t\t\t\t\t"),tbody.appendChild(r)}c.innerHTML="",o.appendChild(tbody);a=document.createElement("h1"),a.innerHTML="全站统计",e=document.createElement("h1");e.innerHTML="阅读排行",c.appendChild(a),c.appendChild(t),c.appendChild(e),c.appendChild(o),sort()});