"use strict";function waterfall(e){"string"==typeof e&&(e=document.querySelector(e));var t=[].map.call(e.children,function(t){return t.style.position="absolute",t});function n(t,e){e=window.getComputedStyle(e);return parseFloat(e["margin"+t])||0}function r(t){return t+"px"}function o(t){return parseFloat(t.style.left)}function i(t){return t.clientWidth}function l(t){return parseFloat(t.style.top)+t.clientHeight+n("Bottom",t)}function s(t){return o(t)+i(t)+n("Right",t)}function u(t){t.sort(function(t,e){return l(t)===l(e)?o(e)-o(t):l(e)-l(t)})}e.style.position="relative";var a=[];t.length&&(t[0].style.top="0px",t[0].style.left=r(n("Left",t[0])),a.push(t[0]));for(var f=1;f<t.length;f++){var p=t[f-1],c=t[f];if(!(s(p)+i(c)<=i(e)))break;c.style.top=p.style.top,c.style.left=r(s(p)+n("Left",c)),a.push(c)}for(;f<t.length;f++){u(a);var c=t[f],y=a.pop();c.style.top=r(l(y)+n("Top",c)),c.style.left=r(o(y)),a.push(c)}u(a);var d=a[0],h=(e.style.height=r(l(d)+n("Bottom",d)),i(e));function v(t){i(e)!=h&&(t.target.removeEventListener(t.type,v),waterfall(e))}window.addEventListener?window.addEventListener("resize",v):document.body.onresize=v}